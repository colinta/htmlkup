#!/usr/bin/env coffee

require 'coffee-script'
htmlkup = require './lib/htmlkup'

process.stdin.resume()
process.stdin.setEncoding('utf8')

html = ''
process.stdin.on 'data', (chunk)->
  html += chunk

process.stdin.on 'end', ()->
  try
    console.log htmlkup(html)
  catch e
    if e.html? then console.log e.html
    if e.coffee? then console.log e.coffee
    if e.current? then console.log e.current
    throw e
